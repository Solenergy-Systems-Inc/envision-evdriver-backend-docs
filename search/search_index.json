{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>This is hosted in GitHub Pages. Happy Reading.</p>"},{"location":"#installation","title":"Installation","text":""},{"location":"#1-install-mkdocs-via-pip","title":"1. Install mkdocs via pip","text":"<pre><code>pip install mkdocs\n</code></pre>"},{"location":"#2-install-all-the-necessary-packages","title":"2. Install all the necessary packages","text":"<pre><code>pip install mkdocs-material\npip install mkdocstrings\npip install \"mkdocstrings[python]\"\npip install mkdocs-awesome-pages-plugin \npip install mkdocs-material \npip install mkdocs-autorefs\n</code></pre>"},{"location":"#3-run-the-server-locally","title":"3. Run the server locally","text":"<pre><code>mkdocs serve\n</code></pre>"},{"location":"#how-to-deploy","title":"How To Deploy","text":"<p>Only manual deployment is supported. GitHub Pages for private repositories is not available for free tier.</p>"},{"location":"#1-add-remote-only-once","title":"1. Add Remote [Only Once]","text":"<pre><code>git remote add docs https://github.com/Solenergy-Systems-Inc/envision-evdriver-backend-docs.git\n</code></pre>"},{"location":"#2-deploy","title":"2. Deploy","text":"<pre><code>mkdocs gh-deploy -r docs\n</code></pre>"},{"location":"Charger/Charger%20Reservation/","title":"Charger Reservation","text":""},{"location":"Charger/Charger%20Reservation/#connect-url","title":"Connect URL","text":"<pre><code>THIS IS A SECRET. MESSAGE A DEV.\n</code></pre>"},{"location":"Charger/Charger%20Reservation/#reserving-a-charger","title":"Reserving a Charger","text":"<ol> <li> <p>The client connects to the websocket.</p> </li> <li> <p>Upon connecting, the client sends a message with <code>command</code> set to <code>START</code>.</p> <ul> <li>If there is an existing reservation within the time limit, an error will be thrown.</li> <li>If there is an existing reservation past the time limit, the reservation will be overwritten.</li> <li>If the client disconnects without sending <code>HOLD</code> prior, the reservation will be cancelled.</li> <li>If the charger is not <code>Preparing</code>, an error will be thrown.</li> </ul> </li> <li> <p>Before paying, the client sends a message with <code>command</code> set to <code>HOLD</code>.</p> <ul> <li>If reservation does not exist, an error will be thrown.</li> <li>If a different user email tries to hold the reservation, an error will be thrown.</li> <li>If the reservation is not active, an error will be thrown.</li> </ul> </li> <li> <p>Upon returning, the client sends a message with <code>command</code> set to <code>RESUME</code>.</p> <ul> <li>If reservation does not exist, an error will be thrown.</li> <li>If a different user email tries to hold the reservation, an error will be thrown.</li> <li>If the reservation is not on hold, an error will be thrown.</li> </ul> </li> <li> <p>[Optional] Upon returning, the client sends a message with <code>command</code> set to <code>CANCEL</code>.</p> <ul> <li>If reservation does not exist, an error will be thrown.</li> <li>If a different user email tries to hold the reservation, an error will be thrown.</li> </ul> </li> </ol>"},{"location":"Charger/Charger%20Reservation/#modules.charger.sm_charger_reservation.dtos.ReserveChargerRequestDTO.ReserveChargerRequestDTO","title":"<code>ReserveChargerRequestDTO</code>  <code>dataclass</code>","text":"<p>This should be the message of the request from the client.</p> <p>Attributes:</p> Name Type Description <code>action</code> <code>str</code> <p>ALWAYS SET TO 'reserveCharger'</p> <code>site_id</code> <code>int</code> <p>SITE OF CHARGER TO RESERVE</p> <code>charger_id</code> <code>str</code> <p>CHARGER TO RESERVE</p> <code>connector_id</code> <code>int</code> <p>CONNECTOR TO BE USED WITHIN THE CHARGER</p> <code>command</code> <code>Union[str, ReservationCommandEnum]</code> <p>SHOULD BE ONE OF THE ENUM</p> <code>email</code> <code>str</code> <p>EMAIL OF RESERVER</p>"},{"location":"Charger/Charger%20Reservation/#modules.charger.sm_charger_reservation.enums.ReservationCommandEnum.ReservationCommandEnum","title":"<code>ReservationCommandEnum</code>","text":"<p>Attributes:</p> Name Type Description <code>START</code> <p>USED UPON CONNECTING TO THE WEBSOCKET</p> <code>HOLD</code> <p>USED JUST BEFORE PAYMENT REDIRECTION</p> <code>RESUME</code> <p>USED AFTER PAYING</p> <code>CANCEL</code> <p>USED TO CANCEL RESERVATION</p>"},{"location":"Charger/Charger%20Reservation/#modules.charger.sm_charger_reservation.enums.ReservationErrorEnum.ReservationErrorEnum","title":"<code>ReservationErrorEnum</code>","text":"<p>Attributes:</p> Name Type Description <code>INVALID_COMMAND</code> <p>INVALID <code>command</code> FIELD</p> <code>EXISTING_RESERVATION</code> <p>THERE IS AN EXISTING CHARGER RESERVATION</p> <code>NON_EXISTING_RESERVATION</code> <p>THERE IS NO EXISTING CHARGER RESERVATION</p> <code>DIFFERENT_USER_EMAIL</code> <p>DIFFERENT USER IS TRYING TO INTERACT WITH THE RESERVATION</p> <code>CHARGER_NOT_PREPARING</code> <p>CHARGER IS NOT IN PREPARING STATUS</p> <code>CHARGER_RESERVATION_NOT_HOLDABLE</code> <p>CHARGER RESERVATION IS NOT HOLDABLE</p> <code>CHARGER_RESERVATION_NOT_RESUMEABLE</code> <p>CHARGER RESERVATION IS NOT RESUMEABLE</p>"},{"location":"Charger/%5BGET%5D%20selectCharger/","title":"[GET] selectCharger","text":"<pre><code>/api/selectCharger\n</code></pre>"},{"location":"Charger/%5BGET%5D%20selectCharger/#modules.charger.dtos.SelectChargerRequestDTO.SelectChargerRequestDTO","title":"<code>SelectChargerRequestDTO</code>  <code>dataclass</code>","text":"<p>Attributes:</p> Name Type Description <code>charger_id</code> <code>str</code> <p>(str) Assigned ID of the charger on site</p> <code>site_id</code> <code>str</code> <p>(str) Site id of the transaction</p>"},{"location":"Charger/%5BGET%5D%20selectCharger/#modules.charger.dtos.SelectChargerResponseDTO.SelectChargerResponseDTO","title":"<code>SelectChargerResponseDTO</code>  <code>dataclass</code>","text":"<p>Attributes:</p> Name Type Description <code>charger</code> <code>dict</code> <p>dictionary containing the charger information based on <code>ChargerDTO</code></p>"},{"location":"Charger/%5BGET%5D%20selectCharger/#modules.charger.dtos.ChargerDTO.ChargerDTO","title":"<code>ChargerDTO</code>  <code>dataclass</code>","text":"<p>Attributes:</p> Name Type Description <code>name</code> <code>str</code> <p>name that will be displayed for the charger</p> <code>brand</code> <code>str</code> <p>brand of the charger</p> <code>model</code> <code>str</code> <p>model of the charger</p> <code>location</code> <code>str</code> <p>location where the charger can be found</p> <code>site_id</code> <code>int</code> <p>id for the site where the charger is associated</p> <code>connectors</code> <code>list</code> <p>details of the connector related for the charger</p>"},{"location":"Charger/%5BPOST%5D%20remoteStartCharging/","title":"[POST] remoteStartCharging","text":"<pre><code>/api/remoteStartCharging\n</code></pre>"},{"location":"Charger/%5BPOST%5D%20remoteStartCharging/#modules.charger.dtos.RemoteStartRequestDTO.RemoteStartRequestDTO","title":"<code>RemoteStartRequestDTO</code>  <code>dataclass</code>","text":"<p>Attributes:</p> Name Type Description <code>email</code> <code>str</code> <p>EMAIL OF USER</p> <code>site_id</code> <code>int</code> <p>SITE ID OF CHARGER</p> <code>charger_id</code> <code>str</code> <p>CHARGER ID TO START</p> <code>connector_id</code> <code>int</code> <p>CONNECTOR ID TO START</p> <code>duration</code> <code>float</code> <p>INTENDED DURATION OF CHARGING</p> <code>payment_intent_id</code> <code>Optional[str]</code> <p>USE THIS FOR PAYMONGO. OTHERWISE, MONEY WILL BE DEDUCTED TO WALLET</p>"},{"location":"Charger/%5BPOST%5D%20remoteStartCharging/#modules.charger.dtos.RemoteStartResponseDTO.RemoteStartResponseDTO","title":"<code>RemoteStartResponseDTO</code>  <code>dataclass</code>","text":"<p>Attributes:</p> Name Type Description <code>transaction_id</code> <code>str</code> <p>CHARGE TRANSACTION ID</p>"},{"location":"Charger/%5BPOST%5D%20remoteStartCharging/#notes","title":"Notes","text":"<ul> <li>If <code>payment_intent_id</code> is indicated, this endpoint will only work for the following cases:<ul> <li>If payment method is credit card and the status is awaiting capture.</li> <li>If payment method is non-credit card and the status is paid.</li> </ul> </li> </ul>"},{"location":"Graphs/%5BGET%5D%20evGraph/","title":"[GET] evGraph","text":"<pre><code>/api/evGraph\n</code></pre>"},{"location":"Graphs/%5BGET%5D%20evGraph/#modules.graphing.dtos.EVGraphRequestDTO.EVGraphRequestDTO","title":"<code>EVGraphRequestDTO</code>  <code>dataclass</code>","text":"<p>Attributes:</p> Name Type Description <code>site_id</code> <code>str</code> <p>id of the site</p> <code>start</code> <code>str</code> <p>start datetime of the graph</p> <code>end</code> <code>str</code> <p>end datetime of the graph</p> <code>tz</code> <code>str</code> <p>timezone of the request</p> <code>graph_type</code> <code>str</code> <p>line / bar graph</p> <code>meter</code> <code>str</code> <p>name of the charger meter</p> <code>charger</code> <code>str</code> <p>name of the charger</p> <code>user_id</code> <code>str</code> <p>id of the user logged in</p>"},{"location":"Graphs/%5BGET%5D%20evGraph/#notes","title":"Notes","text":"<ul> <li>The only optional parameter is the <code>charger</code></li> <li>If the difference between the start and end values are more than a day, the interval between datapoints will be 15 minutes for the line graph and 1 day for the bar graph.</li> </ul> <p>The statistics object will contain the following keys: </p>"},{"location":"Graphs/%5BGET%5D%20evGraph/#modules.graphing.dtos.EVGraphResponseDTO.EVGraphResponseDTO","title":"<code>EVGraphResponseDTO</code>  <code>dataclass</code>","text":"<p>Attributes:</p> Name Type Description <code>ev_data</code> <p>list of lists containing the data points</p> <code>order</code> <code>list</code> <p>list of strings containing the order of the data points</p> <code>statistics</code> <code>dict</code> <p>dict containing the statistics of the data points</p>"},{"location":"Graphs/%5BGET%5D%20evGraph/#modules.graphing.dtos.EVGraphStatisticsDTO.EVGraphStatisticsDTO","title":"<code>EVGraphStatisticsDTO</code>  <code>dataclass</code>","text":"<p>Attributes:</p> Name Type Description <code>duration</code> <code>list</code> <p>duration of transactions based on ORDER</p> <code>total_energy</code> <code>list</code> <p>list of total energy based on ORDER</p> <code>latest_value</code> <code>list</code> <p>list of latest meter readings based on ORDER</p> <code>peak_value</code> <code>list</code> <p>list of peak meter readings based on ORDER</p> <code>peak_time</code> <code>list</code> <p>list of peak meter readings time based on ORDER</p>"},{"location":"Graphs/%5BGET%5D%20evGraph/#notes_1","title":"Notes","text":"<ul> <li>order represents the arrangement of the data points inside the data array. The first datapoint will always be a string literal of the datetime</li> <li>The last element of any array will always be the total sum of the values of the datapoints before it</li> </ul>"},{"location":"Payment/Capture/","title":"Capture","text":"<p>This page explains the implementation of auto-capture.</p> <ol> <li>The <code>Charger_Payment_History</code> table is filled during <code>remoteStartCharging</code>. This is to    identify whether the charging session is via PayMongo or Wallet.</li> <li>On charger status updates, the <code>insertTransactionData</code> handler is triggered.</li> <li>There, we send a message to the <code>CapturePaymentQueue</code> if the following conditions are met:<ul> <li>The charger was stopped.</li> <li>The capture type of the payment associated with the charging session is <code>manual</code>.</li> </ul> </li> <li>The handler associated with the <code>CapturePaymentQueue</code> will then attempt to capture the payment.    If it fails, the message will be sent to the dead-letter queue.</li> </ol>"},{"location":"Payment/Flow/","title":"Flow","text":"<ol> <li>Send a Payment Intent Request.<ul> <li>Set <code>capture_type</code> to <code>automatic</code> for immediate payment.</li> <li>Set <code>capture_type</code> to <code>manual</code> for credit card hold-and-capture payment.</li> </ul> </li> <li>Create Payment Method in FRONTEND.</li> <li>Attach Payment Intent and Method in FRONTEND.</li> <li>If applicable, capture will be done automatically after charging.</li> </ol>"},{"location":"Payment/PayMongo%20Link/","title":"PayMongo Link","text":"<pre><code>https://developers.paymongo.com/docs/pipm-workflow\n</code></pre>"},{"location":"Payment/%5BPOST%5D%20createPaymentIntent/","title":"[POST] createPaymentIntent","text":"<pre><code>/api/createPaymentIntent\n</code></pre>"},{"location":"Payment/%5BPOST%5D%20createPaymentIntent/#modules.payment.dtos.CreateIntentRequestDTO.CreateIntentRequestDTO","title":"<code>CreateIntentRequestDTO</code>  <code>dataclass</code>","text":"<p>Attributes:</p> Name Type Description <code>amount</code> <code>int</code> <p>INTENDED AMOUNT FOR PAYMENT</p> <code>email</code> <code>str</code> <p>EMAIL OF PAYER</p> <code>purpose</code> <code>IntentPurposeEnum</code> <p>LOOK AT Payment Combinations FOR VALUES.</p> <code>payment_method</code> <code>PaymentMethodEnum</code> <p>LOOK AT Payment Combinations FOR VALUES.</p>"},{"location":"Payment/%5BPOST%5D%20createPaymentIntent/#payment-combinations","title":"Payment Combinations","text":"<p>Use the literal values inside the cells.</p> <p>The <code>capture_type</code> column is only here for visualization. Ignore it.</p> purpose payment_method capture_type Top Up card automatic gcash grab_pay paymaya Straight Payment card manual gcash automatic grab_pay paymaya"},{"location":"Payment/%5BPOST%5D%20createPaymentIntent/#modules.payment.dtos.CreateIntentResponseDTO.CreateIntentResponseDTO","title":"<code>CreateIntentResponseDTO</code>  <code>dataclass</code>","text":"<p>Attributes:</p> Name Type Description <code>client_key</code> <code>str</code> <p>USED FOR ATTACHING PAYMENT INTENT AND METHOD</p>"}]}